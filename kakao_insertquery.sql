use kakao_t;

-- passenger 입력

INSERT
INTO PASSENGER(USER_NUM, USER_PW, USER_NAME, USER_PHONE_NUM, USER_BIRTHDAY)
VALUES(0123451, '1234', '승객1', '010-1111-1111', '2000-01-01');

INSERT
INTO PASSENGER(USER_NUM, USER_PW, USER_NAME, USER_PHONE_NUM, USER_BIRTHDAY)
VALUES(0123452, '1234', '승객2', '010-1111-1112', '2000-01-02');

INSERT
INTO PASSENGER(USER_NUM, USER_PW, USER_NAME, USER_PHONE_NUM, USER_BIRTHDAY)
VALUES(0123453, '1234', '승객3', '010-1111-1113', '2000-01-03');

INSERT
INTO PASSENGER(USER_NUM, USER_PW, USER_NAME, USER_PHONE_NUM, USER_BIRTHDAY)
VALUES(0123454, '1234', '승객4', '010-1111-1114', '2000-01-04');

INSERT
INTO PASSENGER(USER_NUM, USER_PW, USER_NAME, USER_PHONE_NUM, USER_BIRTHDAY)
VALUES(0123455, '1234', '승객5', '010-1111-1115', '2000-01-05');

INSERT
INTO PASSENGER(USER_NUM, USER_PW, USER_NAME, USER_PHONE_NUM, USER_BIRTHDAY)
VALUES(0123456, '1234', '승객6', '010-1111-1116', '2000-01-06');

INSERT
INTO PASSENGER(USER_NUM, USER_PW, USER_NAME, USER_PHONE_NUM, USER_BIRTHDAY)
VALUES(0123457, '1234', '승객7', '010-1111-1117', '2000-01-07');

INSERT
INTO PASSENGER(USER_NUM, USER_PW, USER_NAME, USER_PHONE_NUM, USER_BIRTHDAY)
VALUES(0123458, '1234', '승객8', '010-1111-1118', '2000-01-08');

INSERT
INTO PASSENGER(USER_NUM, USER_PW, USER_NAME, USER_PHONE_NUM, USER_BIRTHDAY)
VALUES(0123459, '1234', '승객9', '010-1111-1119', '2000-01-09');

INSERT
INTO PASSENGER(USER_NUM, USER_PW, USER_NAME, USER_PHONE_NUM, USER_BIRTHDAY)
VALUES(1000456, '1234', '승객10', '010-1111-1120', '2000-01-01');

SELECT * FROM PASSENGER;

-- passenger_id 입력

INSERT
INTO PASSENGER_ID(USER_NUM, USER_ID)
VALUES('0123451', 'passenger1');

INSERT
INTO PASSENGER_ID(USER_NUM, USER_ID)
VALUES('0123452', 'passenger2');

INSERT
INTO PASSENGER_ID(USER_NUM, USER_ID)
VALUES('0123453', 'passenger3');

INSERT
INTO PASSENGER_ID(USER_NUM, USER_ID)
VALUES('0123454', 'passenger4');

INSERT
INTO PASSENGER_ID(USER_NUM, USER_ID)
VALUES('0123455', 'passenger5');

INSERT
INTO PASSENGER_ID(USER_NUM, USER_ID)
VALUES('0123456', 'passenger7');

INSERT
INTO PASSENGER_ID(USER_NUM, USER_ID)
VALUES('0123457', 'passenger7');

INSERT
INTO PASSENGER_ID(USER_NUM, USER_ID)
VALUES('0123458', 'passenger8');

INSERT
INTO PASSENGER_ID(USER_NUM, USER_ID)
VALUES('0123459', 'passenger9');

INSERT
INTO PASSENGER_ID(USER_NUM, USER_ID)
VALUES('1000456', 'passenger10');

SELECT * FROM PASSENGER_ID;

-- PASSENGER_ID테이블과 PASSENGER테이블 자연 조인해서 검색
SELECT *
FROM PASSENGER_ID
NATURAL JOIN PASSENGER;

-- PASSENGER 정보 수정
UPDATE PASSENGER
SET USER_PW = 'ajou', USER_BIRTHDAY = '2000-05-05'
WHERE USER_NAME = '승객1';

UPDATE PASSENGER
SET USER_BIRTHDAY = '2000-05-05'
WHERE USER_NAME = '승객6';

-- 승객 이름이 승객1인 승객의 암호와 생일 검색
SELECT USER_PW, USER_BIRTHDAY
FROM PASSENGER
WHERE USER_NAME = '승객1';


-- PASSENGER 누적 점수 업데이트

UPDATE PASSENGER
SET USER_ACCUMM = 1500
WHERE USER_NAME = '승객2';

UPDATE PASSENGER
SET USER_ACCUMM = 1700
WHERE USER_NAME = '승객5';

-- PASSENGER 누적 점수가 1500 이 넘는 PASSENGER 검색

SELECT USER_NAME, USER_ACCUMM
FROM PASSENGER
WHERE USER_ACCUMM >= 1500
ORDER BY USER_ACCUMM;


-- 게시글 INSERT

INSERT
INTO BOARD(POST_NUM, USER_NUM, POST_DATE, POST_PW, POST_CONTENTS)
VALUES(2, 0123453 , '2022-05-25', 1234, '오늘은 카카오택시를 실행해봤습니다. 합정가는 택시 기사님들 최고 감사합니다 항상');

INSERT
INTO BOARD(POST_NUM, USER_NUM, POST_DATE, POST_PW, POST_CONTENTS)
VALUES(1, 0123458, '2022-05-23', 1235, '카카오 택시 애용하고 있습니다 최고!');

-- 기본 게시판 검색 ( 데이터 들어간 값 보이기)

SELECT * FROM BOARD;

-- 승객3가 작성한 게시판의 게시글 검색
SELECT POST_CONTENTS
FROM BOARD
WHERE USER_NUM IN (SELECT USER_NUM
				   FROM PASSENGER
				   WHERE USER_NAME = '승객3');


-- 쿠폰 INSERT

INSERT
INTO COUPON(COUPON_CODE, COUPON_VALIDITY, COUPON_CONTENTS)
VALUES('1가383812', '2022-09-13', '아시아나 항공과 제휴서비스');

INSERT
INTO COUPON(COUPON_CODE, COUPON_VALIDITY, COUPON_CONTENTS)
VALUES('1가404012', '2022-04-05', '교통체증 특별할인');

SELECT * FROM COUPON;
UPDATE COUPON 
SET COUPON_VALIDITY = '2022-05-23'
WHERE COUPON_CODE = '1가383812';

INSERT
INTO COUPON(COUPON_CODE, COUPON_VALIDITY, COUPON_CONTENTS)
VALUES('1나000001', '2022-09-13', '카카오택시 인형 증정 쿠폰');

INSERT
INTO COUPON(COUPON_CODE, COUPON_VALIDITY, COUPON_CONTENTS)
VALUES('1이000001', '2022-12-31', '이벤트 쿠폰');


-- passenger coupon테이블에 data 삽입(고객이 이미 보유한 쿠폰)

INSERT
INTO PASSENGER_COUPON(USER_NUM , COUPON_CODE)
VALUES('0123457', '1가404012');

INSERT
INTO PASSENGER_COUPON(USER_NUM , COUPON_CODE)
VALUES('0123457', '1가383812');

SELECT * FROM PASSENGER_COUPON;

INSERT
INTO PASSENGER_COUPON(USER_NUM , COUPON_CODE)
VALUES('0123458', '1가383812');


-- 승객7이 보유한 쿠폰 모두 조회

SELECT *
FROM COUPON
WHERE COUPON_CODE IN(SELECT COUPON_CODE
					 FROM PASSENGER_COUPON
                     WHERE USER_NUM IN (SELECT USER_NUM
										FROM PASSENGER
										WHERE USER_NAME = '승객7'));


SELECT USER_NAME
FROM PASSENGER
WHERE USER_NUM IN (SELECT USER_NUM
				   FROM PASSENGER_COUPON
                   WHERE COUPON_CODE ='1가383812');

-- 쿠폰코드 1가383812인 쿠폰 삭제

DELETE
FROM COUPON
WHERE COUPON_CODE = '1가383812';


SELECT *
FROM PASSENGER_ID
NATURAL JOIN PASSENGER;



SELECT * FROM PASSENGER_COUPON;

SELECT * FROM COUPON;

-- 기사 데이터 입력

INSERT INTO DRIVER VALUES(1234100, '1969-07-24', 01012341234, '강남', 3.7, '홍길동');

INSERT INTO DRIVER VALUES(1234101, '1972-07-12', 01012341235, '강북', 3.9, '김기동');

INSERT INTO DRIVER VALUES(1234102, '1969-08-24', 01012341236, '수원', 3.4, '김윤석');

INSERT INTO DRIVER VALUES(1234103, '1963-10-24', 01012341237, '여의도', 4.3, '이하응');

INSERT INTO DRIVER VALUES(1234104, '1959-07-23', 01012341238, '강릉', 4.3, '김유식');

INSERT INTO DRIVER VALUES(1234105, '1974-05-31', 01012341239, '속초', 4.1, '고창식');

INSERT INTO DRIVER VALUES(1234106, '1966-06-24', 01012341210, '고성', 3.0, '김승원');

INSERT INTO DRIVER VALUES(1234107, '1960-03-18', 01012341211, '천안', 4.9, '황용하');

INSERT INTO DRIVER VALUES(1234108, '1989-07-25', 01012341212, '인천', 2.7, '조세휘');

INSERT INTO DRIVER VALUES(1234109, '1983-05-04', 01012341213, '강화도', 4.7, '유재승');

INSERT INTO DRIVER VALUES(1234110, '1981-12-25', 01012341214, '울산', 3.8, '가랑비');


SELECT * FROM DRIVER; 

INSERT INTO CAR VALUES('23사1234', '소나타', '중형', '2018-03-14');

INSERT INTO CAR VALUES('23사1223', '아반때', '중형', '2003-06-12');

INSERT INTO CAR VALUES('63사1258', 'K5', '중형', '2021-12-14');

INSERT INTO CAR VALUES('25사1216', 'K7', '중형', '1999-04-28');

INSERT INTO CAR VALUES('37사5834', '제네시스', '중형', '2001-04-09');

INSERT INTO CAR VALUES('68사1252', '산타페', '대형', '2003-03-15');

SELECT * FROM CAR;

INSERT INTO DRIVE VALUES(1234100, '68사1252');

INSERT INTO DRIVE VALUES(1234101, '23사1223');

INSERT INTO DRIVE VALUES(1234102, '38나4040');

INSERT INTO DRIVE VALUES(1234103, '25사1216');

INSERT INTO DRIVE VALUES(1234104, '38나4030');

INSERT INTO DRIVE VALUES(1234105, '37사5834');

INSERT INTO DRIVE VALUES(1234106, '38나4130');

INSERT INTO DRIVE VALUES(1234107, '38나4340');

INSERT INTO DRIVE VALUES(1234108, '63사1258');

INSERT INTO DRIVE VALUES(1234109, '122허1234');

SELECT * FROM DRIVE;

INSERT INTO COMPANY VALUES(09870987, '택시주식회사', 01095137531, '강남', '김실장');

INSERT INTO COMPANY VALUES(51261551, '족발은맛있어', 01091462576, '수원', '강실장');

INSERT INTO COMPANY VALUES(99517864, '치킨도맛있을걸', 01095126723, '강북', '장실장');

INSERT INTO COMPANY VALUES(95137536, '피자도맛있어', 01013345397, '인천', '조실장');

INSERT INTO COMPANY VALUES(142397599, '삼겹살도좋아', 01056248615, '천안', '최실장');

SELECT * FROM COMPANY;


INSERT INTO SUPPLY VALUES(09870987, '2002-03-14', '122허1234');

INSERT INTO SUPPLY VALUES(51261551,'2021-12-14', '63사1258');

INSERT INTO SUPPLY VALUES(09870987, '2022-05-20', '38나4340');

INSERT INTO SUPPLY VALUES(09870987, '2022-05-20', '38나4130');

INSERT INTO SUPPLY VALUES(95137536, '2001-04-09', '37사5834');

INSERT INTO SUPPLY VALUES(09870987, '1999-04-28', '25사1216');

INSERT INTO SUPPLY VALUES(09870987, '2003-03-15', '68사1252');

SELECT * FROM SUPPLY;

INSERT INTO HISTORY VALUES(8942301, 123453, 1234105, '강원도 고성시 고성군', '강원도 속초시','카드', '37사5834', '2022-02-22');

INSERT INTO HISTORY VALUES(8942305, 123453, 1234105, '강원도 고성시 고성군', '강원도 속초시','카드', '37사5834', '2022-02-22');

INSERT INTO HISTORY VALUES(8942302, 123455, 1234102, '수원시 영통구 매탄동', '천안시 서북구 불당동', '현금','38나4040', '2022-02-22');

INSERT INTO HISTORY VALUES(8942303, 123452, 1234103,  '수원시 영통구 매탄동', '수원시 영통구 원천동', '카드','25사1216', '2022-02-22');

INSERT INTO HISTORY VALUES(8942304, 123454, 1234105, '강원도 속초시', '강원도 고성시 고성군','카드', '37사5834', '2022-02-22');


SELECT * FROM HISTORY;

SELECT *
FROM HISTORY
WHERE USER_NUM = '123453';